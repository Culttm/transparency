(function(e,t,n,r){function o(r){if(!n[r]){if(!t[r]){if(e)return e(r);throw Error("Cannot find module '"+r+"'")}var i=n[r]={exports:{}};t[r][0](function(e){var n=t[r][1][e];return o(n?n:e)},i,i.exports)}return n[r].exports}for(var i=0;r.length>i;i++)o(r[i]);return o})("undefined"!=typeof require&&require,{1:[function(e,t){(function(){var n,r,o,i,s,u=[].indexOf||function(e){for(var t=0,n=this.length;n>t;t++)if(t in this&&this[t]===e)return t;return-1};s=e("../lib/lodash.js"),i=e("./helpers.coffee"),r=e("./context.coffee"),o={},o.render=function(e,t,n,u){var a,l;return null==t&&(t=[]),null==n&&(n={}),null==u&&(u={}),a=u.debug&&console?i.consoleLogger:i.nullLogger,a("Transparency.render:",e,t,n,u),e?(s.isArray(t)||(t=[t]),e=(l=i.data(e)).context||(l.context=new r(e,o)),e.render(t,n,u).el):void 0},o.matcher=function(e,t){return e.el.id===t||u.call(e.classNames,t)>=0||e.el.name===t||e.el.getAttribute("data-bind")===t},o.clone=function(e){return n(e).clone()[0]},o.jQueryPlugin=i.chainable(function(e,t,n){var r,i,s,u;for(u=[],i=0,s=this.length;s>i;i++)r=this[i],u.push(o.render(r,e,t,n));return u}),("undefined"!=typeof jQuery&&null!==jQuery||"undefined"!=typeof Zepto&&null!==Zepto)&&(n=jQuery||Zepto,null!=n&&(n.fn.render=o.jQueryPlugin)),(t!==void 0&&null!==t?t.exports:void 0)&&(t.exports=o),"undefined"!=typeof window&&null!==window&&(window.Transparency=o),("undefined"!=typeof define&&null!==define?define.amd:void 0)&&define(function(){return o})}).call(this)},{"../lib/lodash.js":2,"./helpers.coffee":3,"./context.coffee":4}],2:[function(e,t,n){(function(e){(function(r){function o(){}function i(e,t,n){if(null==e)return v;var r=typeof e;if("function"!=r){if("object"!=r)return function(t){return t[e]};var o=tt(e);return function(t){for(var n=o.length,r=!1;n--&&(r=isEqual(t[o[n]],e[o[n]],A)););return r}}return t!==undefined?1===n?function(n){return e.call(t,n)}:2===n?function(n,r){return e.call(t,n,r)}:4===n?function(n,r,o,i){return e.call(t,n,r,o,i)}:function(n,r,o){return e.call(t,n,r,o)}:e}function s(){for(var e,t={hasDontEnumBug:L,hasEnumPrototype:S,isKeysFast:K,nonEnumArgs:$,noCharByIndex:W,shadowed:T,arrays:"isArray(iterable)",bottom:"",loop:"",top:"",useHas:!0},n=0;e=arguments[n];n++)for(var r in e)t[r]=e[r];var o=t.args;t.firstArg=/^[^,]+/.exec(o)[0];var s=Function("createCallback, hasOwnProperty, isArguments, isArray, isString, objectTypes, nativeKeys","return function("+o+") {\n"+G(t)+"\n}");return s(i,C,a,et,m,z,D)}function u(e,t,n){t||(t=0),n===undefined&&(n=e?e.length:0);for(var r=-1,o=n-t||0,i=Array(0>o?0:o);o>++r;)i[r]=e[t+r];return i}function a(e){return O.call(e)==V}function l(e){var t=[];return Y(e,function(e,n){t.push(n)}),t}function c(e){return e===!0||e===!1||O.call(e)==F}function h(e){return e instanceof Date||O.call(e)==M}function f(e){return e?1===e.nodeType:!1}function p(e){return"function"==typeof e}function d(e){return e?z[typeof e]:!1}function y(e){return"number"==typeof e||O.call(e)==H}function m(e){return"string"==typeof e||O.call(e)==Q}function g(e){for(var t=-1,n=tt(e),r=n.length,o=Array(r);r>++t;)o[t]=e[n[t]];return o}function b(e){return e&&"number"==typeof e.length?W&&m(e)?e.split(""):u(e):g(e)}function v(e){return e}var x="object"==typeof n&&n,E="object"==typeof t&&t&&t.exports==x&&t,_="object"==typeof e&&e;_.global===_&&(r=_);var w=[],N={},A=N;r._;var j=RegExp("^"+(N.valueOf+"").replace(/[.*+?^${}()|[\]\\]/g,"\\$&").replace(/valueOf|for [^\]]+/g,".+?")+"$"),T=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"],C=(Math.ceil,w.concat,Math.floor,N.hasOwnProperty),O=(w.push,N.toString),P=j.test(P=u.bind)&&P,k=j.test(k=Array.isArray)&&k,D=(r.isFinite,r.isNaN,j.test(D=Object.keys)&&D);Math.max,Math.min,Math.random;var L,S,V="[object Arguments]",B="[object Array]",F="[object Boolean]",M="[object Date]",I="[object Function]",H="[object Number]",Q="[object String]",q=!!r.attachEvent,Z=P&&!/\n|true/.test(P+q),K=D&&(q||Z),$=!0;(function(){function e(){this.x=1}var t=[];e.prototype={valueOf:1,y:1};for(var n in new e)t.push(n);for(n in arguments)$=!n;L=!/valueOf/.test(t),S=e.propertyIsEnumerable("prototype")})(1);var X=arguments.constructor==Object,R=!a(arguments),W="xx"!="x"[0]+Object("x")[0],z={"boolean":!1,"function":!0,object:!0,number:!1,string:!1,undefined:!1},G=function(e){var t="var index, iterable = "+e.firstArg+", result = iterable;\nif (!iterable) return result;\n"+e.top+";\n";if(e.arrays?(t+="var length = iterable.length; index = -1;\nif ("+e.arrays+") {  ",e.noCharByIndex&&(t+="\n  if (isString(iterable)) {\n    iterable = iterable.split('')\n  }  "),t+="\n  while (++index < length) {\n    "+e.loop+"\n  }\n}\nelse {  "):e.nonEnumArgs&&(t+="\n  var length = iterable.length; index = -1;\n  if (length && isArguments(iterable)) {\n    while (++index < length) {\n      index += '';\n      "+e.loop+"\n    }\n  } else {  "),e.hasEnumPrototype&&(t+="\n  var skipProto = typeof iterable == 'function';\n  "),e.isKeysFast&&e.useHas?(t+="\n  var ownIndex = -1,\n      ownProps = objectTypes[typeof iterable] ? nativeKeys(iterable) : [],\n      length = ownProps.length;\n\n  while (++ownIndex < length) {\n    index = ownProps[ownIndex];\n    ",e.hasEnumPrototype&&(t+="if (!(skipProto && index == 'prototype')) {\n  "),t+=e.loop+"",e.hasEnumPrototype&&(t+="}\n"),t+="  }  "):(t+="\n  for (index in iterable) {",(e.hasEnumPrototype||e.useHas)&&(t+="\n    if (",e.hasEnumPrototype&&(t+="!(skipProto && index == 'prototype')"),e.hasEnumPrototype&&e.useHas&&(t+=" && "),e.useHas&&(t+="hasOwnProperty.call(iterable, index)"),t+=") {    "),t+=e.loop+";    ",(e.hasEnumPrototype||e.useHas)&&(t+="\n    }"),t+="\n  }  "),e.hasDontEnumBug){t+="\n\n  var ctor = iterable.constructor;\n    ";for(var n=0;7>n;n++)t+="\n  index = '"+e.shadowed[n]+"';\n  if (","constructor"==e.shadowed[n]&&(t+="!(ctor && ctor.prototype === iterable) && "),t+="hasOwnProperty.call(iterable, index)) {\n    "+e.loop+"\n  }    "}return(e.arrays||e.nonEnumArgs)&&(t+="\n}"),t+=e.bottom+";\nreturn result"},J={args:"collection, callback, thisArg",top:"callback = callback && typeof thisArg == 'undefined' ? callback : createCallback(callback, thisArg)",arrays:"typeof length == 'number'",loop:"if (callback(iterable[index], index, collection) === false) return result"},U={top:"if (!objectTypes[typeof iterable]) return result;\n"+J.top,arrays:!1};s(J),R&&(a=function(e){return e?C.call(e,"callee"):!1});var Y=s(J,U),et=k||function(e){return X&&e instanceof Array||O.call(e)==B},tt=D?function(e){return d(e)?S&&"function"==typeof e||$&&e.length&&a(e)?l(e):D(e):[]}:l;p(/x/)&&(p=function(e){return e instanceof Function||O.call(e)==I}),Z&&E&&"function"==typeof setImmediate&&(defer=bind(setImmediate,r)),o.forOwn=Y,o.keys=tt,o.toArray=b,o.values=g,o.identity=v,o.isArguments=a,o.isArray=et,o.isBoolean=c,o.isDate=h,o.isElement=f,o.isFunction=p,o.isNumber=y,o.isObject=d,o.isString=m,o.VERSION="1.0.1",x&&E&&((E.exports=o)._=o)})(this)})(window)},{}],3:[function(e,t,n){(function(){var t,r,o,i;t=e("./elementFactory.coffee"),n.before=function(e){return function(t){return function(){return e.apply(this,arguments),t.apply(this,arguments)}}},n.after=function(e){return function(t){return function(){return t.apply(this,arguments),e.apply(this,arguments)}}},n.chainable=n.after(function(){return this}),n.onlyWith$=function(e){return"undefined"!=typeof jQuery&&null!==jQuery||"undefined"!=typeof Zepto&&null!==Zepto?function(){return e(arguments)}(jQuery||Zepto):void 0},n.getElements=function(e){var t;return t=[],i(e,t),t},i=function(e,r){var o,s;for(o=e.firstChild,s=[];o;)o.nodeType===n.ELEMENT_NODE&&(r.push(new t.createElement(o)),i(o,r)),s.push(o=o.nextSibling);return s},n.ELEMENT_NODE=1,n.TEXT_NODE=3,o=function(){return"<:nav></:nav>"!==document.createElement("nav").cloneNode(!0).outerHTML},n.cloneNode="undefined"==typeof document||null===document||o()?function(e){return e.cloneNode(!0)}:function(e){var t,o,i,s,u;if(t=Transparency.clone(e),t.nodeType===n.ELEMENT_NODE)for(t.removeAttribute(r),u=t.getElementsByTagName("*"),i=0,s=u.length;s>i;i++)o=u[i],o.removeAttribute(r);return t},r="transparency",n.data=function(e){return e[r]||(e[r]={})},n.nullLogger=function(){},n.consoleLogger=function(){return console.log(arguments)},n.log=n.nullLogger}).call(this)},{"./elementFactory.coffee":5}],4:[function(e,t){(function(){var n,r,o,i,s,u,a;a=e("./helpers.coffee"),i=a.before,o=a.after,s=a.chainable,u=a.cloneNode,r=e("./instance.coffee"),t.exports=n=function(){function e(e,t){this.el=e,this.Transparency=t,this.template=u(this.el),this.instances=[new r(this.el,this.Transparency)],this.instanceCache=[]}var t,n;return n=s(function(){return this.parent=this.el.parentNode,this.parent?(this.nextSibling=this.el.nextSibling,this.parent.removeChild(this.el)):void 0}),t=s(function(){return this.parent?this.nextSibling?this.parent.insertBefore(this.el,this.nextSibling):this.parent.appendChild(this.el):void 0}),e.prototype.render=i(n)(o(t)(s(function(e,t,n){for(var o,i,s,a,l,c,h;e.length<this.instances.length;)this.instanceCache.push(this.instances.pop().remove());for(;e.length>this.instances.length;)s=this.instanceCache.pop()||new r(u(this.template),this.Transparency),this.instances.push(s.appendTo(this.el));for(h=[],i=l=0,c=e.length;c>l;i=++l)a=e[i],s=this.instances[i],o=[],h.push(s.prepare(a,o).renderValues(a,o).renderDirectives(a,i,t).renderChildren(a,o,t,n));return h}))),e}()}).call(this)},{"./helpers.coffee":3,"./instance.coffee":6}],5:[function(e,t){(function(){var n,r,o,i,s,u,a,l,c,h,f,p,d,y,m,g,b={}.hasOwnProperty,v=function(e,t){function n(){this.constructor=e}for(var r in t)b.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e};f=e("../lib/lodash.js"),h=e("./helpers.coffee"),n=e("./attributeFactory.coffee"),t.exports=i={Elements:{input:{}},createElement:function(e){var t,n;return t="input"===(n=e.nodeName.toLowerCase())?i.Elements[n][e.type.toLowerCase()]||s:i.Elements[n]||o,new t(e)}},o=function(){function e(e){this.el=e,this.attributes={},this.childNodes=f.toArray(this.el.childNodes),this.nodeName=this.el.nodeName.toLowerCase(),this.classNames=this.el.className.split(" "),this.originalAttributes={}}return e.prototype.empty=function(){for(var e;e=this.el.firstChild;)this.el.removeChild(e);return this},e.prototype.reset=function(){var e,t,n,r;n=this.attributes,r=[];for(t in n)e=n[t],r.push(e.set(e.templateValue));return r},e.prototype.render=function(e){return this.attr("text",e)},e.prototype.attr=function(e,t){var r,o;return r=(o=this.attributes)[e]||(o[e]=n.createAttribute(this.el,e,t)),null!=t&&r.set(t),r},e.prototype.renderDirectives=function(e,t,n){var r,o,i,s;s=[];for(o in n)b.call(n,o)&&(r=n[o],"function"==typeof r&&(i=r.call(e,{element:this.el,index:t,value:this.attr(o).templateValue}),null!=i?s.push(this.attr(o,i)):s.push(void 0)));return s},e}(),a=function(e){function t(e){t.__super__.constructor.call(this,e),this.elements=h.getElements(e)}return v(t,e),i.Elements.select=t,t.prototype.render=function(e){var t,n,r,o,i;for(e=""+e,o=this.elements,i=[],n=0,r=o.length;r>n;n++)t=o[n],"option"===t.nodeName&&i.push(t.attr("selected",t.el.value===e));return i},t}(o),c=function(e){function t(){return p=t.__super__.constructor.apply(this,arguments)}var n,r,o,s;for(v(t,e),n=["area","base","br","col","command","embed","hr","img","input","keygen","link","meta","param","source","track","wbr"],o=0,s=n.length;s>o;o++)r=n[o],i.Elements[r]=t;return t.prototype.attr=function(e,n){return"text"!==e&&"html"!==e?t.__super__.attr.call(this,e,n):void 0},t}(o),s=function(e){function t(){return d=t.__super__.constructor.apply(this,arguments)}return v(t,e),t.prototype.render=function(e){return this.attr("value",e)},t}(c),l=function(e){function t(){return y=t.__super__.constructor.apply(this,arguments)}return v(t,e),i.Elements.textarea=t,t}(s),r=function(e){function t(){return m=t.__super__.constructor.apply(this,arguments)}return v(t,e),i.Elements.input.checkbox=t,t.prototype.render=function(e){return this.attr("checked",Boolean(e))},t}(s),u=function(e){function t(){return g=t.__super__.constructor.apply(this,arguments)}return v(t,e),i.Elements.input.radio=t,t}(r)}).call(this)},{"../lib/lodash.js":2,"./helpers.coffee":3,"./attributeFactory.coffee":7}],6:[function(e,t){(function(){var n,r,o,i,s={}.hasOwnProperty;i=e("../lib/lodash.js"),r=(o=e("./helpers.coffee")).chainable,t.exports=n=function(){function e(e,t){this.Transparency=t,this.queryCache={},this.childNodes=i.toArray(e.childNodes),this.elements=o.getElements(e)}return e.prototype.remove=r(function(){var e,t,n,r,o;for(r=this.childNodes,o=[],t=0,n=r.length;n>t;t++)e=r[t],o.push(e.parentNode.removeChild(e));return o}),e.prototype.appendTo=r(function(e){var t,n,r,o,i;for(o=this.childNodes,i=[],n=0,r=o.length;r>n;n++)t=o[n],i.push(e.appendChild(t));return i}),e.prototype.prepare=r(function(e){var t,n,r,i,s;for(i=this.elements,s=[],n=0,r=i.length;r>n;n++)t=i[n],t.reset(),s.push(o.data(t.el).model=e);return s}),e.prototype.renderValues=r(function(e,t){var n,r,o,u;if(i.isElement(e)&&(n=this.elements[0]))return n.empty().el.appendChild(e);if("object"==typeof e){u=[];for(r in e)s.call(e,r)&&(o=e[r],null!=o&&(i.isString(o)||i.isNumber(o)||i.isBoolean(o)||i.isDate(o)?u.push(function(){var e,t,i,s;for(i=this.matchingElements(r),s=[],e=0,t=i.length;t>e;e++)n=i[e],s.push(n.render(o));return s}.call(this)):"object"==typeof o?u.push(t.push(r)):u.push(void 0)));return u}}),e.prototype.renderDirectives=r(function(e,t,n){var r,o,i,u;u=[];for(i in n)s.call(n,i)&&(r=n[i],"object"==typeof r&&("object"!=typeof e&&(e={value:e}),u.push(function(){var n,s,u,a;for(u=this.matchingElements(i),a=[],n=0,s=u.length;s>n;n++)o=u[n],a.push(o.renderDirectives(e,t,r));return a}.call(this))));return u}),e.prototype.renderChildren=r(function(e,t,n,r){var o,i,s,u,a;for(a=[],s=0,u=t.length;u>s;s++)i=t[s],a.push(function(){var t,s,u,a;for(u=this.matchingElements(i),a=[],t=0,s=u.length;s>t;t++)o=u[t],a.push(this.Transparency.render(o.el,e[i],n[i],r));return a}.call(this));return a}),e.prototype.matchingElements=function(e){var t,n,r;return n=(r=this.queryCache)[e]||(r[e]=function(){var n,r,o,i;for(o=this.elements,i=[],n=0,r=o.length;r>n;n++)t=o[n],this.Transparency.matcher(t,e)&&i.push(t);return i}.call(this)),o.log("Matching elements for '"+e+"':",n),n},e}()}).call(this)},{"../lib/lodash.js":2,"./helpers.coffee":3}],7:[function(e,t){(function(){var n,r,o,i,s,u,a,l,c={}.hasOwnProperty,h=function(e,t){function n(){this.constructor=e}for(var r in t)c.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e};l=e("../lib/lodash.js"),a=e("./helpers.coffee"),t.exports=r={Attributes:{},createAttribute:function(e,t){var o;return o=r.Attributes[t]||n,new o(e,t)}},n=function(){function e(e,t){this.el=e,this.name=t,this.templateValue=this.el.getAttribute(this.name)||""}return e.prototype.set=function(e){return this.el[this.name]=e,this.el.setAttribute(this.name,""+e)},e}(),o=function(e){function t(e,t){this.el=e,this.name=t,this.templateValue=this.el.getAttribute(this.name)||!1}var n,o,i,s;for(h(t,e),n=["hidden","async","defer","autofocus","formnovalidate","disabled","autofocus","formnovalidate","multiple","readonly","required","checked","scoped","reversed","selected","loop","muted","autoplay","controls","seamless","default","ismap","novalidate","open","typemustmatch","truespeed"],i=0,s=n.length;s>i;i++)o=n[i],r.Attributes[o]=t;return t.prototype.set=function(e){return this.el[this.name]=e,e?this.el.setAttribute(this.name,this.name):this.el.removeAttribute(this.name)},t}(n),u=function(e){function t(e,t){var n;this.el=e,this.name=t,this.templateValue=function(){var e,t,r,o;for(r=this.el.childNodes,o=[],e=0,t=r.length;t>e;e++)n=r[e],n.nodeType===a.TEXT_NODE&&o.push(n.nodeValue);return o}.call(this).join(""),this.children=l.toArray(this.el.children),(this.textNode=this.el.firstChild)?this.textNode.nodeType!==a.TEXT_NODE&&(this.textNode=this.el.insertBefore(this.el.ownerDocument.createTextNode(""),this.textNode)):this.el.appendChild(this.textNode=this.el.ownerDocument.createTextNode(""))}return h(t,e),r.Attributes.text=t,t.prototype.set=function(e){for(var t,n,r,o,i;t=this.el.firstChild;)this.el.removeChild(t);for(this.textNode.nodeValue=e,this.el.appendChild(this.textNode),o=this.children,i=[],n=0,r=o.length;r>n;n++)t=o[n],i.push(this.el.appendChild(t));return i},t}(n),s=function(e){function t(e){this.el=e,this.templateValue="",this.children=l.toArray(this.el.children)}return h(t,e),r.Attributes.html=t,t.prototype.set=function(e){for(var t,n,r,o,i;t=this.el.firstChild;)this.el.removeChild(t);for(this.el.innerHTML=e+this.templateValue,o=this.children,i=[],n=0,r=o.length;r>n;n++)t=o[n],i.push(this.el.appendChild(t));return i},t}(n),i=function(e){function t(e){t.__super__.constructor.call(this,e,"class")}return h(t,e),r.Attributes["class"]=t,t}(n)}).call(this)},{"../lib/lodash.js":2,"./helpers.coffee":3}]},{},[1]);